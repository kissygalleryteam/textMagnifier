/*! textMagnifier - v1.0 - 2013-06-25 3:14:46 PM
* Copyright (c) 2013 shuilan.cj; Licensed  */
KISSY.add("gallery/textMagnifier/1.0/index",function(a,b,c,d,e,f){function g(a){var b=this;g.superclass.constructor.call(b,a)}var h=b.all,i=".input-magnifier{font-size: 20px;border: solid 1px #ffd2b2;background: #fffae5;padding: 0 0 0 10px;color: #ff4400;min-height: 30px;}.input-magnifier .explain{font-size: 12px;color: #b2b2b2;border-top: 1px solid #ffd2b2;margin: 0 10px 3px 0;padding: 3px 0;}.input-magnifier .text {_height: 32px; line-height: 30px; font-weight: bold;}";return d.addStyleSheet(i),a.extend(g,c,{render:function(){this._init()},_init:function(){var b,c=this,g=d.get(c.get("id")),h='<div class="input-magnifier"><div class="text"></div>';c.get("explainText")&&(h=h+'<div class="explain">'+c.get("explainText")+"</div>"),h+="</div>";var i=new f.Popup({content:h,align:{node:g,points:"top"==c.get("align")?["tl","bl"]:["bl","tl"]},closable:!1,width:c.get("width")?c.get("width"):d.outerWidth(g)-2}),j=function(a){for(var b=[],d=0,e=0,f=c.get("splitType").length;f>e;e++){var g=a.substr(d,c.get("splitType")[e]);g.length>0&&b.push(g),d+=c.get("splitType")[e]}return b.join(c.get("delimiter"))};e.on(g,"valuechange",function(c){var e=a.trim(c.newVal);e.length>0?(i.show(),b||(b=d.get(".text",i.get("contentEl"))),e=j(e),d.text(b,e)):i.hide()}),e.on(g,"focusin",function(){d.val(g).length>0&&i.show()}),e.on(g,"focusout",function(){i.hide()})}},{ATTRS:{splitType:{value:[3,4,4],setter:function(a){return h(a)},getter:function(a){return h(a)}}}}),g},{requires:["node","base","dom","event","overlay"]});